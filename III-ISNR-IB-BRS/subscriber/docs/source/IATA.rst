IATA 行李訊息
=============


    \ **(一) 行李訊息種類介紹**\
     
     國際航空運輸協會(英語：International Air Transport Association，縮寫IATA)，將行李的資訊訂定分為八大種類，運用於航務行李系統彼此之間，有關行李在各種情境狀況的資訊溝通與航運處理。如下表：

     ..  image:: img/1.png
         :height: 800
         :width: 835
 
     舉例說明，如：一名轉機旅客從美國甘迺迪國際機場(IATA代碼：JFK)起飛, 在德國法蘭克福機場(IATA代碼：FRA)進行轉機，飛往新加坡樟宜機場(IATA代码：SIN)。該名旅客的行李原始資訊(BSM)及行李處理資訊(BPM), 會被登入在行李作業系統(BHS－Baggage Handling System)與機場出境控管系統(DCS－Departure Control System)，進行行李資訊的轉交溝通。此其之外，機場出境控管系統(DCS－Departure Control System)，需要再提供轉機的行李轉移資訊(BTM)。

     ..  image:: img/2.png
         :height: 319
         :width: 550
 
| 

    \ **(二) BPM與BSM 格式簡介**\
     
     旅客在check-in行李時，系統會自動將出入境飛航資訊，行李條碼，旅客個人資料，以及攜帶的行李大小重量等相關的資訊，編譯生產一組依國際標準格式的行李原始資訊(BSM)，再經由地勤人員掃條碼裝櫃，觸發後端系統將行李原始資訊(BSM)，加入裝櫃資訊(.U .Q)及程序資訊(.J)，生成行李處理資訊(BPM)。下圖為標準格式的呈現，一組完整的行李處理資訊(BPM)，起始識別碼為”BPM”，結尾識別碼為”ENDBPM”，各元素類型以”.”為區分，內文資訊用”/”分割，如：出境資訊：.F/BA117/030CT/SEL/J。

     ..  image:: img/3.png
         :height: 402
         :width: 595
 
     以數學表示BSM和BPM之間的關係，如下

     ..  image:: img/4.png
         :height: 68
         :width: 120
 
| 

    \ **(三) 實作IATA　BPM/BSM 解析器**\
     
     採用高度擴充的程式設計架構，進行實作IATA行李資訊的解析器，擴充未來規格書的變更及容納更多的行李資訊種類。在程式資料結構中，按照規格書規範，順序列出所定義的元素及內文，程式解析器會動態解析原始行李資訊，以JSON格式的呈現，讓後端程式，可快速加以運用。
     
     以擴充行李管理資訊(BCM)為範例，管理者參考規格書和元素內文列表之間的差異，如下圖紅色矩形範圍的部份是BCM與BPM差異新增的元素內文：

     ..  image:: img/5.png
         :height: 271
         :width: 640
              
     依序列出新增差異的部份，如下圖紅色字體的新增：
     
     ..  image:: img/6.png
         :height: 616
         :width: 960
              
     程式將會自動動態擴充加入的行李管理資訊(BCM)格式，同時保留支援原先已加入的BPM, BSM, BTM等行李資訊種類，執行結果如下圖：
     
     ..  image:: img/7.png
         :height: 200
         :width: 510

| 

    \ **(四) 創建行李資訊的主鍵**\
     
     在行李識別碼上，國際航空運輸協會(IATA)創建唯一識別的行李條碼。但機場實際操作上，會間隔一段時間後，重複使用過往的行李條碼，只保證當下行李條碼不重複，系統不會追溯過往行李條碼是否有被使用過，這有可能造成，運用歷史BPM資訊的其他系統，遇到行李條碼衝突的問題。因此額外創建行李資訊的主鍵，預防此狀況，實作如下圖：
     
     ..  image:: img/8.png
         :height: 663
         :width: 930  
 

| 